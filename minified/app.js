ymaps.ready(function(){var e,t,o,n=[44.91092197884283,34.06396121831145],s=new ymaps.Map("map",{center:n,zoom:15},{searchControlResults:1,searchControlNoCentering:!0,buttonMaxWidth:150}),a=new ymaps.Placemark(n,{iconContent:"Гараж 321"},{preset:"islands#redStretchyIcon"}),r=s.controls.get("searchControl"),c=s.controls.get("geolocationControl");function d(t){t||r.hideResult(),e&&(s.geoObjects.remove(e),e=null)}function i(n,r){if(n)"auto"==n?(masstransitRouteItem.deselect(),pedestrianRouteItem.deselect()):"masstransit"==n?(autoRouteItem.deselect(),pedestrianRouteItem.deselect()):"pedestrian"==n&&(autoRouteItem.deselect(),masstransitRouteItem.deselect()),r.select(),routeTypeSelector.collapse();else{if(!o)return;n=o}if(!e)return o=n,void c.events.fire("press");s.geoObjects.remove(t),t=o=null,o=n,t=new ymaps.multiRouter.MultiRoute({referencePoints:[e,a],params:{routingMode:n}},{boundsAutoApply:!0}),s.geoObjects.add(t)}s.geoObjects.add(a),s.controls.add(routeTypeSelector),autoRouteItem.events.add("click",function(e){i("auto",e.get("target"))}),masstransitRouteItem.events.add("click",function(e){i("masstransit",e.get("target"))}),pedestrianRouteItem.events.add("click",function(e){i("pedestrian",e.get("target"))}),s.events.add("click",function(t){d(),e=new ymaps.Placemark(t.get("coords"),{iconContent:"From here"},{preset:"islands#greenStretchyIcon"}),s.geoObjects.add(e),i()}),r.events.add("resultshow",function(t){d(!0),e=r.getResultsArray()[t.get("index")],i()}),c.events.add("locationchange",function(t){d(),e=t.get("geoObjects").get(0),i()})});